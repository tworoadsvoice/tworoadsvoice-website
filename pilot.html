<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pilot - Two Roads Voice</title>
  <style>
        /* Activa controles nativos en modo oscuro (Chrome/Firefox/Safari) */
      :root{ color-scheme: dark; }
      
      /* Fallback por si algún navegador no respeta lo anterior */
      select, option, optgroup{
        background-color: var(--input);
        color: var(--ink);
      }
      option:checked,
      option:hover{
        background-color:#1a2635 !important;
        color: var(--ink);
      }
      /* Da aire respecto al bloque anterior (el textarea) */
.consent{
  margin-top: 28px !important;     /* súbelo a 16–20px si quieres más */
  display: flex;                    /* alinea caja + texto en una línea */
  align-items: center;              /* centra verticalmente */
  gap: 10px;                        /* separación entre caja y texto */
}

/* Evita “empujes” raros entre navegadores */
.consent input[type="checkbox"]{
  width: 18px;
  height: 18px;
  margin: 0;                        /* que no meta margen propio */
  transform: none;                  /* quita el nudge anterior */
}


    :root{
      --bg:#0b0f14; --panel:#0f1620; --ink:#eaf2ff; --sub:#a9b6c7;
      --brand:#4f79ff; --brand-700:#3a5de0; --ok:#31c48d; --err:#ff6b6b;
      --stroke:#223041; --input:#121b26;
      --radius:14px; --pad:18px; --gap:16px; --fieldH:48px;
      --shadow:0 6px 24px rgba(0,0,0,.35), inset 0 0 0 1px var(--stroke);
      --shadow-focus:0 8px 28px rgba(0,0,0,.45), inset 0 0 0 1px var(--brand);
      --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Inter, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:var(--font); background:var(--bg); color:var(--ink);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    .wrap{max-width:980px;margin-inline:auto;padding:24px 20px 60px}
    h1{font-size:clamp(26px,3vw,34px);margin:8px 0 6px}
    .muted{color:var(--sub);margin:0 0 22px}

    /* Card */
    .card{background:var(--panel);border-radius:20px;padding:24px;box-shadow:var(--shadow)}
    .grid{
      display:grid; gap:var(--gap);
      grid-template-columns:repeat(12,1fr);
    }
    /* 2 columnas por defecto; en móvil 1 col */
    .col-6{grid-column:span 6}
    .col-12{grid-column:span 12;}
    @media (max-width: 760px){
      .col-6{grid-column:span 12}
    }

    label{display:block;font-size:14px;color:var(--sub);margin:2px 0 6px}
    .field{
      display:flex; align-items:center; height:var(--fieldH);
      background:var(--input); border:1px solid var(--stroke); border-radius:12px;
      padding:0 14px; transition:.18s border-color, .18s box-shadow, .18s background;
    }
    .field:focus-within{border-color:var(--brand); box-shadow:var(--shadow-focus)}
    input[type="text"], input[type="email"], select, textarea{
      width:100%; height:100%; border:0; outline:0; background:transparent; color:var(--ink);
      font-size:15px;
    }
    textarea{
      min-height:130px; padding:14px; border-radius:12px; resize:vertical;
      background:var(--input); border:1px solid var(--stroke);
    }
    textarea:focus{border-color:var(--brand); box-shadow:var(--shadow-focus)}
    .hint{font-size:12px; color:var(--sub); margin-top:4px}

    /* Consent inline */
    .consent{
      display:flex; align-items:center; gap:10px; color:var(--sub); font-size:14px;
      background:var(--input); border:1px solid var(--stroke); border-radius:12px;
      padding:12px 14px; min-height:var(--fieldH);
    }
    .consent input{width:18px;height:18px;margin:0; accent-color:var(--brand)}
    .consent strong{color:var(--ink)}

    /* Button */
    .actions{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
    .btn{
      appearance:none; border:0; border-radius:12px; padding:12px 18px;
      font-weight:600; color:white; background:var(--brand); cursor:pointer;
      box-shadow:0 8px 24px rgba(79,121,255,.25);
      transition:transform .06s ease, background .18s ease, opacity .18s ease;
    }
    .btn:hover{background:var(--brand-700)}
    .btn:disabled{opacity:.6; cursor:not-allowed}
    .link{color:var(--ink); text-decoration:underline; text-underline-offset:3px}
    .note{font-size:13px; color:var(--sub)}

    /* Toast */
    .toast{
      position:fixed; inset:auto 16px 16px auto; background:#0c151f; color:var(--ink);
      padding:14px 16px; border-radius:12px; border:1px solid var(--stroke); display:none;
      box-shadow:0 10px 28px rgba(0,0,0,.4);
    }
    .toast.ok{border-color:#184b3a}
    .toast.err{border-color:#5a1f1f}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>7-day free pilot / Piloto gratuito de 7 días</h1>
    <p class="muted">Complete the form and we'll respond within 24 hours with your agent ready to test. / Completa el cuestionario y te respondemos en menos de 24 horas con tu agente listo para probar.</p>

    <form id="pilotForm" class="card" novalidate>
      <div class="grid">
        <div class="col-6">
          <label for="name">Full name / Nombre completo*</label>
          <div class="field"><input id="name" name="name" type="text" required placeholder="Name" autocomplete="name"></div>
        </div>

        <div class="col-6">
          <label for="email">Email*</label>
          <div class="field"><input id="email" name="email" type="email" required placeholder="tucorreo@gmail.com" autocomplete="email"></div>
        </div>

        <div class="col-6">
          <label for="phone">Phone Number / Teléfono*</label>
          <div class="field"><input id="phone" name="phone" type="text" inputmode="tel" required placeholder="+1 305 123 4567" autocomplete="tel"></div>
          <!-- <div class="hint">Se normaliza a E.164 antes de enviar.</div> -->
        </div>

        <div class="col-6">
          <label for="company">Dealer / Consensionario</label>
          <div class="field"><input id="company" name="company" type="text" placeholder="Nombre de la empresa"></div>
        </div>

        <div class="col-6">
          <label for="languages">Lenguage for the Agent / Idioma(s) de atención*</label>
          <div class="field">
            <select id="languages" name="languages" required>
              <option value="" disabled selected>Selecciona</option>
              <option>Español</option>
              <option>English</option>
              <option>Bilingüe (ES/EN)</option>
            </select>
          </div>
        </div>

       <!-- <div class="col-6">
          <label for="hours">Horario de atención (zona horaria)</label>
          <div class="field">
            <select id="hours" name="hours">
              <option value="" selected>Selecciona</option>
              <option>L–V 9–6pm (EST)</option>
              <option>L–V 9–6pm (CST)</option>
              <option>L–V 9–6pm (MST)</option>
              <option>L–V 9–6pm (PST)</option>
              <option>24/7</option>
            </select>
          </div>
        </div> -->

        <div class="col-6">
          <label for="volume">Aproximate calls / Volumen de llamadas estimado</label>
          <div class="field">
            <select id="volume" name="volume">
              <option value="" selected>Selecciona</option>
              <option>Menos de 20/día</option>
              <option>20–50/día</option>
              <option>50–100/día</option>
              <option>100+/día</option>
            </select>
          </div>
        </div>

        <div class="col-6">
          <label for="goal">Pilot's objective - notes / Objetivo del piloto - notas</label>
          <div class="field">
            <select id="goal" name="goal">
              <option value="" selected>Select / Selecciona</option>
              <option>More test drivings / Más citas</option>
              <option>Reception and filtering / Recepción y filtrado</option>
              <option>Support - after-sales / Soporte - posventa</option>
              <option>Other / Otro</option>
            </select>
          </div>
        </div>

        <div class="col-12">
          <label for="notes">Tell us what you expect from the pilot in 7 days. / Cuéntanos qué esperas del piloto en 7 días.</label>
          <textarea id="notes" name="notes" placeholder="Contexto, casos de uso, script, integraciones…
Context, use cases, script, integrations…"></textarea>
        </div>

        <div class="col-12 consent">
          <input id="consent" name="consent" type="checkbox" required />
          <label for="consent" style="margin:0; cursor:pointer;">
            I agree to the use of my data to contact me and create the <strong>7-day pilot.</strong>.
          </label>
        </div>

        <!-- Honeypot (anti-spam) -->
        <input type="text" id="website" name="website" autocomplete="off" style="display:none">

        <div class="col-12 actions">
          <button id="submitBtn" class="btn" type="submit">Enviar solicitud</button>
          <span class="note">Do you want to talk with sales? / ¿Prefieres una llamada para aclarar dudas? <a class="link" href="https://calendly.com/tworoadsvoice/30min">Schedule a call / Agenda con ventas</a>.</span>
        </div>
      </div>
    </form>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    // ⚠️ Reemplaza por tu Webhook de n8n:
    const WEBHOOK_URL = 'https://tworoads.app.n8n.cloud/webhook/requests';

    const form = document.getElementById('pilotForm');
    const btn  = document.getElementById('submitBtn');
    const toast= document.getElementById('toast');

    function showToast(msg, ok=true){
      toast.textContent = msg;
      toast.className = 'toast ' + (ok ? 'ok' : 'err');
      toast.style.display = 'block';
      clearTimeout(window.__t);
      window.__t = setTimeout(()=> toast.style.display='none', 4200);
    }

    // Normalización rápida a E.164 (cubre casos comunes)
    function toE164(raw){
      if (!raw) return '';
      let p = (''+raw).trim();
      // Cambia "00" al inicio por "+"
      if (p.startsWith('00')) p = '+' + p.slice(2);
      // Si ya empieza con + y son >= 8 dígitos, intenta devolver tal cual sin espacios
      if (p.startsWith('+')) return p.replace(/[^\d+]/g,'');
      // Quita todo lo no numérico
      const digits = p.replace(/\D/g,'');
      // Si tiene 10 dígitos (US), asume +1
      if (digits.length === 10) return '+1' + digits;
      // Sino, si tiene 11–15, prepende + si no lo tiene
      if (digits.length >= 8 && digits.length <= 15) return '+' + digits;
      return raw; // fallback
    }
const getVal = id => (document.getElementById(id)?.value || '').trim();
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Honeypot
      if (document.getElementById('website').value) return;

      if (!form.checkValidity()){
        showToast('Revisa los campos obligatorios.', false);
        form.reportValidity();
        return;
      }

      btn.disabled = true;

      const payload = {
  name:   getVal('name'),
  email:  getVal('email'),
  phone:  toE164(getVal('phone')),
  company:getVal('company'),
  languages: getVal('languages'),
  hours:  getVal('hours'),           // si no existe, queda ''
  volume: getVal('volume'),
  goal:   getVal('goal'),
  notes:  getVal('notes'),
  consent: document.getElementById('consent').checked,
  source: 'website-pilot-form'
};


      try{
        const res = await fetch(WEBHOOK_URL, {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify(payload)
        });

        if(!res.ok) throw new Error('HTTP ' + res.status);

        showToast('¡Solicitud enviada! Te contactaremos en menos de 24 h.', true);
        form.reset();
      }catch(err){
        console.error(err);
        showToast('No se pudo enviar. Intenta nuevamente.', false);
      }finally{
        btn.disabled = false;
      }
    });
  </script>
</body>
</html>

